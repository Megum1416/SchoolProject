@model IEnumerable<SchoolProject_DB.Models.Post>

@{
    ViewData["Title"] = "討論區";
    string sessionMemberID = ViewBag.SessionMemberID; // 從 ViewBag 取得 Session 的 MemberID
}

<h1 class="alert alert-secondary text-center" role="alert">歡迎來到 @ViewData["Title"] ！</h1>

@if (!string.IsNullOrEmpty(sessionMemberID))
{
    <!-- 只有登入的使用者可以看到新增文章的按鈕 -->
    <p>
        <a asp-action="Create" class="btn btn-outline-success text-end">新增文章</a>
    </p>
}

<table class="table table-hover table-bordered align-middle">
    <thead class="thead-dark text-center table-light">
        <tr>
            <th>標題</th>
            <th>發文者</th>
            <th>更新時間</th>
            <th></th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model)
        {
            <tr>
                <!-- 顯示文章標題，靠左對齊 -->
                <td>
                    @Html.DisplayFor(modelItem => item.PostTitle)
                </td>
                <!-- 顯示發文者的 UserName，置中對齊 -->
                <td class="text-center">
                    @item.Member.UserName
                </td>
                <!-- 顯示 UpdatedAt 或 CreatedAt -->
                <td class="text-center">
                    @if (item.UpdatedAt.HasValue)
                    {
                        @item.UpdatedAt?.ToString("yyyy/MM/dd HH:mm")
                    }
                    else
                    {
                        @item.CreatedAt.ToString("yyyy/MM/dd HH:mm")
                    }
                </td>
            </tr>
        }
    </tbody>
</table>
